<!doctype html>
<html>
<head>
{include="page.head"}
</head>
<body>
{include="page.menu"}

<div class="container">
<div class="row">
  <div class="col-lg-9">
    <div class="page-header no-espace-top">
      <h2>{$page_title}</h2>
    </div>
  </div>
  <div class="col-lg-3">
    <form method="post" action="{$target-search}" enctype="multipart/form-data">
      <div class="input-group">
        <input type="search" class="span2" id="search" name="search" placeholder="Recherche" {if="!empty($inputs['search'])"}value="{$inputs['search']}"{/if}/>
        <button class="btn" type="submit"><i class="icon-search"></i> IMDB</button>
      </div>
    </form>
  </div>
</div>
{if="!empty($error)"}
<div class="row">
	<div class="col-lg-8 col-lg-offset-2">
		<div class="alert alert-danger text-center">
			<strong>Oh damn!</strong> {$error}
		</div>
	</div>
</div>
{/if}
<div class="row">
<form method="post" action="{$target}" enctype="multipart/form-data">
<fieldset>
<div class="col-lg-6">
	<div class="form-group">
		<label for="title" class="text-primary">Title</label>
		<input type="text" class="form-control" id="title" name="title" placeholder="Moi, moche et méchant" {if="!empty($inputs['title'])"}value="{$inputs['title']}"{/if}/>
	</div>
	<div class="form-group">
		<label for="synopsis" class="text-primary">Synopsis</label>
		<textarea class="form-control" id="synopsis" name="synopsis" rows="8" placeholder="The beautiful story in few words" >{if="!empty($inputs['synopsis'])"}{$inputs['synopsis']}{/if}</textarea>
	</div>
	<div class="form-group">
		<label for="genre">Genre</label>
		<input type="text" class="form-control" id="genre" name="genre" placeholder="Action, Comedy" {if="!empty($inputs['genre'])"}value="{$inputs['genre']}"{/if}/>
	</div>

	<div class="well espace-top">
	<div class="form-group checkbox no-espace-top">
		<label for="status" class="text-primary">
		<input type="checkbox" name="status" id="status" {if="!empty($inputs['status'])"}checked="checked"{/if}/> I’ve seen it
		</label>
	</div>
	<div class="form-group form-group-note">
		<label for="note">Rating (ouf of 10)</label>
		<input type="number" class="form-control slider slider-note" id="note" name="note" min="0" max="10" step="1" value="{if="!empty($inputs['note'])"}{$inputs['note']}{else}5{/if}" data-slider-min="0" data-slider-max="10" data-slider-step="1" data-slider-value="{if="!empty($inputs['note'])"}{$inputs['note']}{else}5{/if}" />
	</div>
	<div class="form-group checkbox no-espace-bottom">
		<label for="owned">
		<input type="checkbox" name="owned" id="owned" {if="!empty($inputs['owned'])"}checked="checked"{/if}/> I’ve owned it
		</label>
	</div>
	</div>
</div>
<div class="col-lg-6">
	<div class="form-group">
		<label for="original_title" class="text-muted">Original title</label>
		<input type="text" class="form-control" id="original_title" name="original_title" placeholder="Despicable Me" {if="!empty($inputs['original_title'])"}value="{$inputs['original_title']}"{/if}/>
	</div>
	<div class="form-group">
		<label for="duration">Duration (minutes)</label>
		<input type="number" class="form-control slider slider-minutes" id="duration" name="duration"  min="0" max="300" step="1" placeholder="90" data-slider-min="0" data-slider-max="300" data-slider-step="1" data-slider-value="{if="!empty($inputs['duration'])"}{$inputs['duration']}{else}-5{/if}" 
		value="{if="!empty($inputs['duration'])"}{$inputs['duration']}{/if}" />
	</div>
	<div class="form-group">
		<label for="release_date">Release date</label>
		<div class="input-group">
			<span class="input-group-addon text-muted"><i class="icon-calendar-empty"></i></span>
			<input type="text" class="form-control datepicker-release" data-date-format="yyyy-mm-dd" data-date="{if="!empty($inputs['release_date'])"}{$inputs['release_date']}{else}{$today}{/if}" data-date-viewmode="years" id="release_date" name="release_date" placeholder="{if="!empty($inputs['release_date'])"}{$inputs['release_date']}{else}{$today}{/if}" {if="!empty($inputs['release_date'])"}value="{$inputs['release_date']}"{/if}/>
		</div>
	</div>
	<div class="form-group">
		<label for="country">Country</label>
		<select class="form-control" id="country" name="country">
			{$countries}
		</select>
	</div>
	<div class="form-group">
		<label for="link_website">More infos online</label>
		<div class="input-group">
			<span class="input-group-addon text-muted">http://</span>
			<input type="text" class="form-control" id="link_website" name="link_website" placeholder="movies.com/film/despicable-me.html" {if="!empty($inputs['link_website'])"}value="{$inputs['link_website']}"{/if}/>
		</div>
	</div>
	<div class="form-group">
		<label for="link_image">URL to image</label>
		<div class="input-group">
			<span class="input-group-addon text-muted">http://</span>
			<input type="text" class="form-control" id="link_image" name="link_image" placeholder="movies.com/images/despicable-me.jpg" {if="!empty($inputs['link_image'])"}value="{$inputs['link_image']}"{/if}/>
		</div>
		<div class="espace-top-sm"><label for="link_image_import" class="normal"><input type="checkbox" name="link_image_import" id="link_image_import" {if="!empty($inputs['link_image_import'])"}checked="checked"{/if}/> Import image</label></div>
	</div>
	<!--
	<div class="form-group">
		<label for="links-image-upload">Or upload an image</label>
		<input type="file" id="links-image-upload" name="links-image-upload" />
	</div>
	-->
</div>
<div class="col-lg-12">
	<input type="hidden" name="token" value="{$token}" />
	<div class="form-group form-controls">
		<div class="col-lg-12">
			<button type="submit" class="btn btn-primary">Save</button>
			<button type="reset" class="btn btn-default">Reset</a>
			{if="!empty($delete)"}
			<a href="{$delete}&amp;token={$token}" class="btn btn-danger pull-right" onclick="return confirmDeleteMovie('{$inputs['title']}')">Delete</a>
			{/if}
	</div>
	</div>
</div>
</fieldset>
</form>
</div>
</div>

{include="page.foot"}
<script>
$(function() {
$('input.slider-minutes').slider({ formater: function(v){return v+' minute'+(v>1 ? 's' : '');}, handle: 'triangle' });
$('input.slider-note').slider({ formater: function(v){return v+' out of 10';} });
$('.datepicker-release').datepicker();
$('select#country option').prepend(function() {return '<span class="flag flag-option flag-'+$(this).val()+'"></span> ';} );
if($('input#status').attr('checked') == undefined) { $('.form-group-note').slideToggle(0); }
$('input#status').change(function(){ $('.form-group-note').slideToggle(250); });
});
</script>
</body>
</html>