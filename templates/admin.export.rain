<!doctype html>
<html>
<head>
{include="page.head"}
<style>option {display:block; padding:4px 8px;}</style>
</head>
<body>
{include="page.menu"}

<div class="container">
<div class="row">
<div class="col-lg-12">
	<div class="page-header no-espace-top">
		<h2>{$page_title}</h2>
	</div>
	<p>This wizard will export your database into a <strong>JSON file</strong>.
	<br />You can use it as a backup, or to import those movies elsewhere.</p>
</div>
</div>

<form class="espace-top form-horizontal" method="post" action="{""|Path::export}">
	<div class="form-group no-espace-bottom">
		<label class="control-label col-lg-2 label-checkbox" for="private">Privacy</label>
		<div class="col-lg-10">
			<div class="checkbox">
				<label for="private">
					<input type="checkbox" name="private" id="private" checked="checked" /> Keep my data private
				</label>
				<p class="help-block">It will not export if you have seen, owned a movie and the note you have given.</p>
			</div>
		</div>
	</div>
	<div class="form-group no-espace-top">
		<label class="control-label col-lg-2 label-checkbox" for="images">Images</label>
		<div class="col-lg-10">
			<div class="checkbox">
				<label for="images">
					<input type="checkbox" name="images" id="images" /> Export images
				</label>
				<p class="help-block">Images will be exported in the JSON file as base64.
					<br /><span class="text-warning">Note: Size file will be bigger! </span></p>
			</div>
		</div>
	</div>

	<div class="form-group movies">
		<label class="control-label col-lg-2 label-checkbox export">Movies to export</label>
		<div class="col-lg-10">
			{loop="movies"}<div class="checkbox">
				<label for="movie[{$value.id}]"><input type="checkbox" name="movie[{$value.id}]" id="movie[{$value.id}]" checked="checked"/>{$value.title}</label>
			</div>
			{/loop} 
		</div>
	</div>

	<input type="hidden" name="token" value="{$token}" />
	<div class="form-group form-controls">
		<div class="col-lg-8 col-lg-offset-2">
			<button type="submit" class="btn btn-primary" rel="external">Export</button>
			<button type="reset" class="btn btn-default">Reset</button>
		</div>
	</div>
</form>

</div>

{include="page.foot"}
<script>
$(function(){
$('label.export').append('<div class="btn btn-default btn-xs espace-top-sm export-toggle">Toggle all</div>');
var checked = true;
function toggleMovies(){ checked = !checked; checkboxes = $('.movies input');  for(var i=0, n=checkboxes.length;i<n;i++) {checkboxes[i].checked = checked;} }
$('.export-toggle').click(function(){ toggleMovies(); });
});
</script>
</body>
</html>